

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Introduction - Literate Programming</title>

	<link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="stylesheet" href="bootstrap/css/readable/bootstrap.min.css" />
<link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="sidebar/sidebar.min.css" />
<link rel="stylesheet" href="css/book.min.css" />
<link rel="stylesheet" href="syntax-highlight/solarized-light.min.css" />
<link rel="stylesheet" href="mermaid/mermaid.css" />

</head>

<body>
    
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">Literate Programming</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="index.html"><i class="fa fa-home" aria-hidden="true"></i> Home</a></li>
					<li><a href="https://github.com/johtela/LiterateProgramming"><i class="fa fa-github" aria-hidden="true"></i> GitHub Repository</a></li>
                    <li><a href="https://github.com/johtela/LiterateProgramming/releases"><i class="fa fa-download" aria-hidden="true"></i> Download</a></li>
                    <li><a href="License.html">License</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col-md-3 hidden-xs hidden-sm">
                
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4>On This Page</h4>
            </div>
            <div id="header-menu" class="panel-body main-menu">
                <ul></ul>
            </div>
        </div>  
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4>Table of Contents</h4>
            </div>
            <div class="panel-body main-menu">
                <ul>
	<li><a href="index.html">Home</a></li>
	<ul>
	</ul>
	<li><a href="Introduction.html" class="selected">Introduction</a></li>
	<ul>
	</ul>
	<li><a href="src/Options.html">Command Line Options</a></li>
	<ul>
	</ul>
	<li><a href="src/Program.html">Main Program</a></li>
	<ul>
	</ul>
	<li><a href="src/SplitPath.html">SplitPath Structure</a></li>
	<ul>
	</ul>
	<li><a href="src/Weaver.html">Document Weaver</a></li>
	<ul>
	</ul>
	<li><a href="src/MdWeaver.html">Markdown Weaver</a></li>
	<ul>
	</ul>
	<li><a href="src/HtmlWeaver.html">HTML Weaver</a></li>
	<ul>
	</ul>
	<li><a href="src/TocManager.html">TOC Manager</a></li>
	<ul>
	</ul>
	<li><a href="src/MSBuildHelpers.html">MSBuild Helpers</a></li>
	<ul>
	</ul>
	<li><a href="src/BlockList.html">Source Blocks</a></li>
	<ul>
	</ul>
	<li><a href="src/BlockBuilder.html">Block Builder</a></li>
	<ul>
	</ul>
	<li><a href="src/HtmlBlockBuilder.html">HTML Block Builder</a></li>
	<ul>
	</ul>
	<li><a href="src/HtmlGenerator.html">HTML Generation</a></li>
	<ul>
	</ul>
	<li>Themes</li>
	<ul>
<ul>
	<li><a href="CSWeave.Theme/DirHelpers.html">Directory Utilities</a></li>
	<ul>
	</ul>
	<li><a href="CSWeave.Theme/Toc.html">Table of Contents Classes</a></li>
	<ul>
	</ul>
	<li><a href="CSWeave.Theme/PageParams.html">Page Parameters</a></li>
	<ul>
	</ul>
	<li><a href="CSWeave.Theme/Theme.html">Theme Base Class</a></li>
	<ul>
	</ul>
</ul>
	</ul>
	<li><a href="FrontMatter.html">Front Matter</a></li>
	<ul>
	</ul>
	<li><a href="TableOfContents.html">Table of Contents File</a></li>
	<ul>
	</ul>
	<li><a href="TipsAndTricks.html">Tips &amp; Tricks</a></li>
	<ul>
	</ul>
	<li><a href="License.html">License</a></li>
	<ul>
	</ul>
	<li><a href="README.html">README</a></li>
	<ul>
	</ul>
</ul>
            </div>
        </div>

            </div>
			<div class="col-md-9">
				<ul class="pager">
	<li class="previous"><a href="index.html">Previous: Home</a></li>
	<li class="next"><a href="src/Options.html">Next: Command Line Options</a></li>
</ul>
				<div id="static-content" class="markdown">
					<h1 id="literate-programming-makes-documenting-c-code-enjoyable">Literate Programming Makes Documenting C# Code Enjoyable</h1>
<blockquote>
<p>Let us change our traditional attitude to the construction of programs: Instead of imagining that
our main task is to instruct a computer what to do, let us concentrate rather on explaining to human
beings what we want a computer to do.</p>
<p><em>Donald Knuth, Computer Journal, 1984</em></p>
</blockquote>
<p><a href="https://en.wikipedia.org/wiki/Literate_programming">Literate programming</a> is a software design
methodology proposed by <a href="https://en.wikipedia.org/wiki/Donald_Knuth">Donald Knuth</a>, the Grand
Wizard of computer science. Its guiding principle is that computer programs should be written
like a book or an essay. Knuth argues that programmers should not focus just on writing code,
they should also document the thought processes that led them to the chosen implementation;
not only describing <em>what</em> the code does, but <em>why</em>. This clearly helps other programmers
understand the code better, but also the author will find it easier to revise the code
later on.</p>
<p>Back in the 80s when Knuth first introduced his idea, he wrote a set of tools to manage code
and documentation together. These tools take a file containing text and code interleaved and
produce the source code to be compiled, as well as the &quot;documentation source&quot; that can be converted
to a readable format. They are basically preprocessors which operate on the same source file,
extracting different parts from it. Knuth called this source language <code>WEB</code>, hence the tools
were called &quot;Weave&quot; and &quot;Tangle&quot;. Weave produces the documentation in
<a href="https://en.wikipedia.org/wiki/TeX"><em>TeX</em></a> format and Tangle produces compilable code. The
concept is depicted in the picture below.</p>
<div class="mermaid">graph LR
    LP[LP File] -->|Weave| DOC[Documentation]
    LP -->|Tangle| SRC[Source Code]
    DOC -->|Generate| HTM[HTML, PDF, ...]
    SRC -->|Compile| EXE
</div>
<p>A more common way to combine code and documentation is to write the documentation inside comments and
extract it using a post-processor, leaving the compilation process unchanged. For example, Haskell,
Python, and Lisp have literate programming tools available that work like this. However, there hasn't
been any notable attempts to make literate programming possible in .NET. One of the reasons why literate
programming is unfamiliar to most programmers is because the tooling has not been available for
the mainstream development platforms.</p>
<p>Another reason for literate programming's lack of popularity is that it requires the programmer
to be proficient in two traits instead of just one. Writing fluent prose can be as hard as writing
good code - and equally time consuming as well. Nevertheless, the benefits of having both working
software and comprehensive documentation can sometimes outweigh the costs. Especially, when writing
software whose inner workings need to be understood by others; such as libraries, tutorials,
example programs, and so on. Additional benefit is that the documentation can be produced in various
shapes and forms: as a PDF, blog post, presentation, website, or even as a complete book. In fact,
there are quite popular recently published books that have been written as literate programs; for
example the <a href="http://www.pbrt.org/">Physically Based Rendering</a> book.</p>
<p>In .NET languages the standard way of documenting code is to write XML comments. API documentation
generated from XML comments serves as a reference manual that can be used to quickly find what a
specific class or method does. When done properly, it can be a satisfactory way of describing the
correct use of an API. However, writing XML comments is a tedious task, and requires a
lot of discipline. XML comments tend to be verbose and repetitive which means that the produced
documentation is dense and boring to read. In many cases, reading the code is faster than browsing
through the documentation. There is little additional information in the XML comments, usually.</p>
<h2 id="csweave-literate-programming-tool-for-c"><code>csweave</code> - Literate Programming Tool for C#</h2>
<p>To make literate programming a viable option also for the C# developers, I wrote a tool
called <code>csweave</code>. The documentation you are reading right now is generated from its source
code. <code>csweave</code> parses C# source files and extracts text from comment blocks written in
<a href="https://en.wikipedia.org/wiki/markdown">markdown language</a>. The idea is that you will
interleave the documentation in the comments of your code and compile your code normally.
You can then generate readable documentation from your code by running the tool.</p>
<p>You don't need to use special syntax to annotate the documentation. All comments that are
<em>not</em> in the XML comment format will be extracted and included in the output. This applies
only to multi-line comment blocks. Single line comments starting with <code>//</code> are shown as
code in the documentation.</p>
<p>Literate comments can appear anywhere in your code. The goal is to write your code in small
pieces as you are describing what it does (and <em>why</em>) in the comments. This way the generated
documentation becomes more readable and easy to follow.</p>
<p>We will go through the whole implementation of <code>csweave</code>, using it as an example on how to
write programs in literate style. In the end we have covered all the features and options
available in the program. Not just how they work, but also how they are implemented. Let's
begin with the high-level view.</p>
<h2 id="the-structure-of-the-program">The Structure of the Program</h2>
<p>The high-level flow chart of the program is shown below. You can click a box in the diagram
to jump to the documentation of the corresponding module. Alternatively, you can jump to a page
by clicking a section in the table of contents. You can also move to the next and previous page
using the navigation buttons on the top and the bottom.</p>
<div class="mermaid">graph TD
    CMD[Parse command line options]
    click CMD "src/Options.html"
    PRG{Output format?}
    click PRG "src/Program.html"
    CMD --> PRG
    WMD[Generate markdown files]
    click WMD "src/MdWeaver.html"
    WHT[Generate HTML files]
    click WHT "src/HtmlWeaver.html"
    PRG -->|markdown| WMD
    PRG -->|HTML| WHT
    BLK[Split source file into blocks]
    click BLK "src/BlockBuilder.html"
    BHT[Split source file to HTML blocks]
    click BHT "src/HtmlBlockBuilder.html"
    WMD -->|For each source file| BLK
    WHT -->|For each source file| BHT
    OMD[Output markdown]
    BLK --> OMD
    GHT[Convert markdown to HTML]
    click GHT "src/HtmlGenerator.html"
    BHT --> GHT
    subgraph Theme
    THM[Render HTML page]
    click THM "CSWeave.Theme/Theme.html"
    AUX[Copy auxiliary CSS/JS/font files]
    THM -->|After all files processed| AUX
    end
    GHT --> THM
    DON((Done))
    OMD --> DON
    AUX --> DON
</div>

				</div>
				<ul class="pager">
	<li class="previous"><a href="index.html">Previous: Home</a></li>
	<li class="next"><a href="src/Options.html">Next: Command Line Options</a></li>
</ul>
			</div>
        </div>
    </div>
    
    <footer class="panel-footer text-center">
        <div align="center">Copyright © 2017 Tommi Johtela</div>
		<div align="right">
			<small>
				Documentation created with <a href="https://johtela.github.io/LiterateProgramming/">Literate Programming</a>.
			</small>
		</div>
    </footer>


    
    <script src="bootstrap/js/jquery.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="sidebar/sidebar.js"></script>
    <script src="syntax-highlight/syntax.js"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
        extensions: ["jsMath2jax.js"]
        });
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML'></script>
	<script src="mermaid/mermaid.min.js"></script>
	<script>mermaid.initialize({startOnLoad:true});</script>
</body>
</html>