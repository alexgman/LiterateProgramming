

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Introduction - Literate Programming</title>

	<link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" />
<link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="sidebar/sidebar.min.css" />
<link rel="stylesheet" href="css/book.min.css" />
<link rel="stylesheet" href="syntax-highlight/solarized-light.min.css" />
<link rel="stylesheet" href="mermaid/mermaid.css" />

</head>

<body>
    
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">Literate Programming</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="index.html"><i class="fa fa-home" aria-hidden="true"></i> Home</a></li>
					<li><a href="https://github.com/johtela/LiterateProgramming"><i class="fa fa-github" aria-hidden="true"></i> GitHub Repository</a></li>
                    <li><a href="https://github.com/johtela/LiterateProgramming/releases"><i class="fa fa-download" aria-hidden="true"></i> Download</a></li>
                    <li><a href="License.html">License</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col-md-3 hidden-xs hidden-sm">
                
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4>On This Page</h4>
            </div>
            <div id="header-menu" class="panel-body main-menu">
                <ul></ul>
            </div>
        </div>  
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4>Table of Contents</h4>
            </div>
            <div class="panel-body main-menu">
                <ul>
	<li><a href="index.html">Home</a></li>
	<ul>
		<li>Literate programming home page.</li>
	</ul>
	<li><a href="Introduction.html" class="selected">Introduction</a></li>
	<ul>
		<li>Introduction to literate programming and to the <code>csweave</code> tool.</li>
	</ul>
	<li><a href="src/Options.html">Command Line Options</a></li>
	<ul>
		<li>Lists the available command line options and input parameters.</li>
	</ul>
	<li><a href="src/Program.html">Main Program</a></li>
	<ul>
		<li>Main program that initiates the document generation.</li>
	</ul>
	<li><a href="src/SplitPath.html">SplitPath Structure</a></li>
	<ul>
		<li>Helper data structure that makes working with file and directory paths easier.</li>
	</ul>
	<li><a href="src/Weaver.html">Document Weaver</a></li>
	<ul>
		<li>Weaver reads the source files and outputs documents based on options.</li>
	</ul>
	<li><a href="src/MdWeaver.html">Markdown Weaver</a></li>
	<ul>
		<li>Weaver subclass that outputs Markdown as output.</li>
	</ul>
	<li><a href="src/HtmlWeaver.html">HTML Weaver</a></li>
	<ul>
		<li>Weaver subclass that outputs HTML as output.</li>
	</ul>
	<li><a href="src/TocManager.html">TOC Manager</a></li>
	<ul>
		<li>Loads, saves and updates table of contents.</li>
	</ul>
	<li><a href="src/MSBuildHelpers.html">MSBuild Helpers</a></li>
	<ul>
		<li>Helper methods for working with MSBuild projects.</li>
	</ul>
	<li><a href="src/BlockList.html">Source Blocks</a></li>
	<ul>
		<li>Data structure that splits a source file into comments and code.</li>
	</ul>
	<li><a href="src/BlockBuilder.html">Block Builder</a></li>
	<ul>
		<li>C# syntax tree walker that will create a block list from a source file.</li>
	</ul>
	<li><a href="src/HtmlBlockBuilder.html">HTML Block Builder</a></li>
	<ul>
		<li>Subclass of block builder that enriches code blocks in HTML output.</li>
	</ul>
	<li><a href="src/HtmlGenerator.html">HTML Generation</a></li>
	<ul>
		<li>Markdown to HTML generation and template processing.</li>
	</ul>
	<li>Themes</li>
	<ul>
		<li>Customizing the HTML output.</li>
<ul>
	<li><a href="CSWeave.Theme/DirHelpers.html">Directory Utilities</a></li>
	<ul>
		<li>Functions that help file/directory management.</li>
	</ul>
	<li><a href="CSWeave.Theme/Toc.html">Table of Contents Classes</a></li>
	<ul>
		<li>Data structure representing the table of contents.</li>
	</ul>
	<li><a href="CSWeave.Theme/PageParams.html">Page Parameters</a></li>
	<ul>
		<li>Parameters available for a theme when it is rendering a page.</li>
	</ul>
	<li><a href="CSWeave.Theme/Theme.html">Theme Base Class</a></li>
	<ul>
		<li>Base class for themes to inherit from.</li>
	</ul>
</ul>
	</ul>
	<li><a href="FrontMatter.html">Front Matter</a></li>
	<ul>
		<li>Defining document metadata.</li>
	</ul>
	<li><a href="TableOfContents.html">Table of Contents File</a></li>
	<ul>
		<li>Description of the TOC file format.</li>
	</ul>
	<li><a href="TipsAndTricks.html">Tips &amp; Tricks</a></li>
	<ul>
		<li>How to configure the tool to improve your workflow.</li>
	</ul>
	<li><a href="License.html">License</a></li>
	<ul>
		<li>Program license and terms of use.</li>
	</ul>
	<li><a href="README.html">README</a></li>
	<ul>
		<li>TODO! Add page description.</li>
	</ul>
</ul>
            </div>
        </div>

            </div>
			<div class="col-md-9">
				<ul class="pager">
	<li class="previous"><a href="index.html">Previous: Home</a></li>
	<li class="next"><a href="src/Options.html">Next: Command Line Options</a></li>
</ul>
				<div id="static-content" class="markdown">
					<h1 id="literate-programming-makes-documenting-c-code-enjoyable">Literate Programming Makes Documenting C# Code Enjoyable</h1>
<blockquote>
<p>Let us change our traditional attitude to the construction of programs: Instead of imagining that
our main task is to instruct a computer what to do, let us concentrate rather on explaining to human
beings what we want a computer to do.</p>
<p><em>Donald Knuth, Computer Journal, 1984</em></p>
</blockquote>
<p><a href="https://en.wikipedia.org/wiki/Literate_programming">Literate programming</a> is an old idea proposed by
Donald Knuth. Its main principle is that code is written like a book. Knuth argues that programmers
should not focus solely on just writing code, they should also document the thought process that led
to the chosen implementation. Traditional API documentation describes <em>what</em> the code does, whereas
literate programming encourages the programmer to document <em>why</em> the implementation looks like it does.
This not only helps the other programmers understand the code better, but also the author will find it
easier to revisit the code later on.</p>
<p>Knuth also wrote tools to aid writing code in literate manner. These tools take a file containing
text and code interleaved and produce the source code to be compiled, as well as the &quot;documentation source&quot;
that can be converted to readable format. They are basically preprocessors which operate on the
same source file, extracting different parts from it. Knuth called this source language <code>WEB</code>, hence
the tools were called &quot;Weave&quot; and &quot;Tangle&quot;. Weave produced the documentation in <em>TeX</em> format and Tangle
produced compilable code. The concept is depicted in the picture below.</p>
<div class="mermaid">graph LR
    LP[LP File] -->|Weave| DOC[Documentation]
    LP -->|Tangle| SRC[Source Code]
    DOC -->|Generate| HTM[HTML, PDF, ...]
    SRC -->|Compile| EXE
</div>
<p>The same idea can be implemented in other ways too. The most popular method nowadays is to write the
documentation inside comments and extract it using a post-processor, leaving the compilation process
unchanged. There are newer literate programming tools available that utilize this idea. For example,
Haskell, Python, and Lisp have tools like this. For .NET there hasn't really been serious attempts to
make literate programming possible. One of the reasons why literate programming is unfamiliar to most
programmers is because the tooling has not been available for mainstream development platforms.</p>
<p>Another reason for the literate programming's lack of popularity is its requirement for the programmer
to be proficient in two traits instead of just one. Writing fluent prose can be equally hard to writing
good code -- and as time consuming as well. Nevertheless, the benefits of having both working software
and comprehensive documentation always available can sometimes outweigh the costs. Especially when
writing software such as libraries, tutorials, example programs, etc. whose innards need to be understood
by other programmers. The form in which the documentation is presented can be anything from a book to
a blog post. In fact, there are recent and quite popular books that have been written as literate
programs; for example the <a href="http://www.pbrt.org/">Physically Based Rendering</a> book.</p>
<p>In .NET languages the standard way of documenting code is to write XML comments. API documentation
generated from XML comments serves as a reference manual that can be used to find quickly what a
specific class or method does. When done properly, it is a satisfactory way of describing the correct
use of an API, or presenting example usage patterns. However, writing XML comments is quite tedious,
and it requires a lot of discipline to realize their full benefits. XML comments tend to be very verbose
and repetitive which leads to documentation that is boring to read. In many occasions, reading the
code is faster and easier than reading the documentation. There is little additional information in
the XML comments usually.</p>
<h2 id="csweave-literate-programming-tool-for-c"><code>csweave</code> - Literate Programming Tool for C#</h2>
<p>To make literate programming in C# possible I wrote a tool called <code>csweave</code>. The documentation
you are reading right now is generated from its source code. <code>csweave</code> reads C# source files
and extracts text from comment blocks written in <a href="https://en.wikipedia.org/wiki/markdown">markdown language</a>.
The idea is that you will interleave the documentation in the comments and compile your code
normally. You can then generate the documentation as either HTML or markdown by running the tool.</p>
<p>You don't need to use special syntax to annotate the documentation. All comments that are
<em>not</em> in the XML comment format will be extracted and included in the output. This applies
only to multi-line comment blocks. Single line comments starting with <code>//</code> are shown as
code in the documentation.</p>
<p>Literate comments can appear anywhere in the code. The intention is to write the code in small
pieces  as you are describing what it does (and also <em>why</em>) in the comments. This way the
generated documentation becomes more readable and easy to follow.</p>
<p>We will go through the implementation of <code>csweave</code> using it as an example on how to write
programs in literate style.</p>
<h2 id="structure-of-the-program">Structure of the Program</h2>
<p>A high-level flow chart of the program operation is shown below. Click on a box to jump to the
corresponding documentation or select a section from the table of contents in the sidebar.
You can also move to the next and previous section using the navigation buttons on the top and
bottom of the page.</p>
<div class="mermaid">graph TD
    CMD[Parse command line options]
    click CMD "src/Options.html"
    PRG{Output format?}
    click PRG "src/Program.html"
    CMD --> PRG
    WMD[Generate markdown files]
    click WMD "src/MdWeaver.html"
    WHT[Generate HTML files]
    click WHT "src/HtmlWeaver.html"
    PRG -->|markdown| WMD
    PRG -->|HTML| WHT
    BLK[Split source file into blocks]
    click BLK "src/BlockBuilder.html"
    BHT[Split source file to HTML blocks]
    click BHT "src/HtmlBlockBuilder.html"
    WMD -->|For each source file| BLK
    WHT -->|For each source file| BHT
    OMD[Output markdown]
    BLK --> OMD
    GHT[Convert markdown to HTML]
    click GHT "src/HtmlGenerator.html"
    BHT --> GHT
    subgraph Theme
    THM[Render HTML page]
    click THM "CSWeave.Theme/Theme.html"
    AUX[Copy auxiliary CSS/JS/font files]
    THM -->|After all files processed| AUX
    end
    GHT --> THM
    DON((Done))
    OMD --> DON
    AUX --> DON
</div>

				</div>
				<ul class="pager">
	<li class="previous"><a href="index.html">Previous: Home</a></li>
	<li class="next"><a href="src/Options.html">Next: Command Line Options</a></li>
</ul>
			</div>
        </div>
    </div>
    
    <footer class="panel-footer text-center">
        <p>Copyright © 2017 Tommi Johtela</p>
    </footer>


    
    <script src="bootstrap/js/jquery.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="sidebar/sidebar.js"></script>
    <script src="syntax-highlight/syntax.js"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
        extensions: ["jsMath2jax.js"]
        });
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML'></script>
	<script src="mermaid/mermaid.min.js"></script>
	<script>mermaid.initialize({startOnLoad:true});</script>
</body>
</html>